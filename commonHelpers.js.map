{"version":3,"file":"commonHelpers.js","sources":["../src/js/servises/buttonService.js","../src/js/servises/isiToast.js","../src/js/servises/loaderService.js","../src/js/templates/refs.js","../src/js/templates/createItemsMarkup.js","../src/js/servises/imgApi.js","../src/js/servises/lightBox.js","../src/main.js"],"sourcesContent":["function hide(button) {\n  button.classList.add(\"is-hidden\");\n}\n\nfunction show(button) {\n  button.classList.remove(\"is-hidden\");\n}\n\nfunction enable(button, preloader) {\n  preloader.classList.add(\"is-hidden\");\n  button.disabled = false;\n}\n\nfunction disable(button, preloader) {\n  preloader.classList.remove(\"is-hidden\");\n  button.disabled = true;\n}\n\nfunction enableBtn(button) {\n  button.disabled = false;\n}\n\nfunction disableBtn(button) {\n  button.disabled = true;\n}\n\n\n\nexport default { hide, show, enable, disable, enableBtn, disableBtn };","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nfunction noQuery() {\n    iziToast.error({\n      title: 'ðŸ¥º Ooops...',\n      message: 'Please, input query!',\n      position: 'center',\n    });\n}\n\nfunction noImg() {\n     iziToast.error({\n        title: 'ðŸ¥º Ooops...',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'center',\n      });\n}\n\nfunction apiError() {\n     iziToast.error({\n      title: 'ðŸ¥º Ooops...',\n      message:\n        'An error occurred while fetching images. Please try again later.',\n      position: 'center',\n    });\n}\n\nfunction endOfSearch() {\n    iziToast.info({\n        title: 'ðŸ¥º Ooops...',\n        message:\n          \"We're sorry, but you've reached the end of search results.\",\n        position: 'bottomCenter',\n      });\n}\n\nexport default { noQuery, noImg, apiError, endOfSearch };","function showLoader(button) {\n  button.classList.add('show');\n}\n\nfunction hideLoader(button) {\n  button.classList.remove('show');\n}\n\nexport { showLoader, hideLoader };","export const refs = {\n  searchForm: document.querySelector('.form'),\n  resultContainer: document.querySelector('.gallery'),\n  loaderModal: document.querySelector('.overlay'),\n  searchBtn: document.querySelector('.search-btn'),\n  loadMoreBtn: document.querySelector('.load-btn'),\n  preloader: document.querySelector('.preloader'),\n};","export default function createItemsMarkup(hits, resultContainer) {\n  const markup = hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n      <img\n        class=\"gallery-image\"\n        src=\"${webformatURL}\"\n        alt=\"${tags}\"\n      />\n    </a>\n      <ul class=\"description\">\n        <li class=\"items-descr\">\n          <h3>Likes</h3>\n          <p>${likes}</p>\n        </li>\n        <li class=\"items-descr\">\n          <h3>Views</h3>\n          <p>${views}</p>\n        </li>\n        <li class=\"items-descr\">\n          <h3>Comments</h3>\n          <p>${comments}</p>\n        </li>\n        <li class=\"items-descr\">\n          <h3>Downloads</h3>\n          <p>${downloads}</p>\n        </li>\n      </ul>\n  </li>\n  `\n    )\n    .join('');\n\n  resultContainer.insertAdjacentHTML('beforeend', markup);\n}","import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api';\nconst API_KEY = '41902273-a1675a4e2dad43acb6fd87e89';\n\n// https://pixabay.com/api?key=41902273-a1675a4e2dad43acb6fd87e89&q=sky&per_page=9&page=1&image_type=photo&orientation=horizontal&safesearch=true\n\nfunction searchImageByName({ query, page = 1, per_page }) {\n  return axios\n    .get(`${BASE_URL}/`, {\n      params: {\n        key: API_KEY,\n        q: query,\n        per_page,\n        page,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n      },\n    })\n    .then(({ data }) => data);\n}\n\nexport { searchImageByName };","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nfunction onLightBox() {\n     var lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n\n    lightbox.refresh();\n}\n\nexport{ onLightBox };","import buttonService from \"./js/servises/buttonService.js\";\nimport isiToast from './js/servises/isiToast.js';\nimport { showLoader, hideLoader } from \"./js/servises/loaderService.js\"\nimport { refs } from './js/templates/refs.js';\nimport createItemsMarkup from './js/templates/createItemsMarkup.js';\nimport { searchImageByName } from './js/servises/imgApi.js';\nimport { onLightBox } from \"./js/servises/lightBox.js\";\n\nconst queryParams = {\n  query: '',\n  page: 1,\n  maxPage: 0,\n  per_page: 30,\n};\n\nconst { query } = refs.searchForm.elements;\nquery.addEventListener('mouseenter', onMouseOver);\n\nfunction onMouseOver() {\n  refs.searchForm.addEventListener('submit', handleSearch);\n  buttonService.enableBtn(refs.searchBtn);\n}\n\nrefs.searchForm.addEventListener('submit', handleSearch);\nhideLoader(refs.loaderModal);\n\nasync function handleSearch(event) {\n  buttonService.disableBtn(refs.searchBtn);\n  showLoader(refs.loaderModal);\n  event.preventDefault();\n\n  refs.resultContainer.innerHTML = '';\n  \n  queryParams.page = 1;\n\n  const formQuery = event.currentTarget;\n  queryParams.query = formQuery.elements.query.value.trim();\n\n  if (!queryParams.query) {\n    isiToast.noQuery();\n    hideLoader(refs.loaderModal);\n    return;\n  }\n\n  try {\n    const { hits, totalHits } = await searchImageByName(queryParams);\n    queryParams.maxPage = Math.ceil(totalHits / queryParams.per_page);\n\n    if (!hits || totalHits === 0) {\n      isiToast.noImg();\n      return;\n    }\n\n    if (hits.length > 0 && hits.length !== totalHits) {\n      refs.loadMoreBtn.addEventListener('click', handleLoadMore);\n      buttonService.show(refs.loadMoreBtn);\n      } else {\n      buttonService.hide(refs.loadMoreBtn);\n      buttonService.enableBtn(refs.searchBtn);\n    }\n\n    createItemsMarkup(hits, refs.resultContainer);\n    onLightBox();\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    isiToast.apiError();\n  } finally {\n    hideLoader(refs.loaderModal);\n    formQuery.reset();\n  }\n}\n\nasync function handleLoadMore() {\n  showLoader(refs.loaderModal);\n  \n  buttonService.disable(refs.loadMoreBtn, refs.preloader);\n  queryParams.page += 1;\n\n  try {\n    const { hits } = await searchImageByName(queryParams);\n    createItemsMarkup(hits, refs.resultContainer);\n\n    onLightBox();\n\n    const elementHeight = document.querySelector('.gallery-item').getBoundingClientRect().height;\n    window.scrollBy({\n      top: 1.7 * elementHeight,\n      behavior: 'smooth',\n    })\n\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    isiToast.apiError();\n  } finally {\n    hideLoader(refs.loaderModal);\n    buttonService.enable(refs.loadMoreBtn, refs.preloader);\n\n    if (queryParams.page === queryParams.maxPage) {\n      buttonService.hide(refs.loadMoreBtn);\n      refs.loadMoreBtn.removeEventListener('click', handleLoadMore);\n      buttonService.enableBtn(refs.searchBtn);\n      isiToast.endOfSearch();\n    }\n  }\n}\n"],"names":["hide","button","show","enable","preloader","disable","enableBtn","disableBtn","buttonService","noQuery","iziToast","noImg","apiError","endOfSearch","isiToast","showLoader","hideLoader","refs","createItemsMarkup","hits","resultContainer","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","BASE_URL","API_KEY","searchImageByName","query","page","per_page","axios","data","onLightBox","lightbox","SimpleLightbox","queryParams","onMouseOver","handleSearch","event","formQuery","totalHits","handleLoadMore","error","elementHeight"],"mappings":"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"}